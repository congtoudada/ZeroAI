# ZeroAI（持续更新中）

ZeroAI是一个由**配置文件驱动**的**组件式**，基于**视频流**的**多进程**AI框架

## 目录结构

```
.
├── bin                    # main脚本，运行时内容
├── conf                   # 各种配置
│   ├── algorithm              # 算法配置
│   ├── cam                    # 视频流配置（一个视频流配置可对应多个算法）
│   ├── log                    # 日志配置
│   ├── application-dev.yaml   # 项目根配置（开发环境）
│   └── application-pro.yaml   # 项目根配置（生产环境）
├── lib                    # 各类算法
│   ├── business               # 业务类算法
│   ├── detection              # 目标检测算法
│   ├── face                   # 人脸识别算法
│   ├── mot                    # 多目标追踪算法
│   └── reid                   # 重识别算法
├── log                    # 日志（自动生成）
├── pretrained             # 预训练权重
├── res                    # 资源
│   ├── images                 # 图像资源
│   └── videos                 # 视频资源
├── script                 # 脚本工具
├── zero                   # ZeroAI框架
├── README.md              # 说明文档
├── setup.py               # 自定义包安装脚本
└── requirements.txt       # 项目依赖文件
```

## 关键概念

Component 分类：

* 基础组件：最核心最基础的组件。
  * LauncherComponent：启动组件。负责管理整个框架的初始化与运作
  * StreamComponent：流组件。一个摄像头对应一个流组件，负责取流并初始化各个算法
* 算法组件：单独的进程运行，所有算法都是基于流的，因此一个流组件可装配若干算法组件进行推理（适用于实时算法）
* 服务组件：单独的进程运行，所有摄像头进程共享，处理并响应所有摄像头的请求（适用于非实时算法，如人脸识别进程等）
* 帮助组件：需要依赖其他组件运行，拓展某些组件的功能（适用于为算法添加功能，如为计数算法添加人脸识别）

Component 生命周期函数：

* `__init__`：构造函数。主要用于声明变量或进行简单初始化
* `on_start`：初始化时调用一次。主要用于复杂的初始化工作
* `on_update`：每帧调用，具体频率由配置文件指定。主要用于运行算法逻辑
* `on_destroy`：销毁时调用。释放资源
* `on_analysis`：每帧调用，具体频率由配置文件指定。自动打印日志

> 某些组件可能有自己单独的生命周期函数

![生产车间异常检测](README.assets/生产车间异常检测.jpg)
